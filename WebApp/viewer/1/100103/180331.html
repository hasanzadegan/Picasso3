

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<title>Picasso2 UI Generator</title>
<head>
    <meta charset="UTF-8">
    <meta company="hamfekrangroup.ir">
    <meta author="shahrokh hassanzadegan">
    <meta email="sh.h.zadegan@gmail.com">
	
	
	<!--Global JS for Skin -->
	<script src="Scripts/angular.min.js"></script>
	<script src="Scripts/angular-aria.min.js"></script>
	<script src="Scripts/angular-animate.js"></script>
	<script src="Scripts/angular-material.min.js"></script>
	<script src="Scripts/angular-material-icons.min.js"></script>
	<script src="Scripts/angular-route.min.js"></script>
	<script src="Scripts/moment.min.js"></script>
	<script src="Scripts/angular-messages.min.js"></script>
	<script src="scripts/ngStorage.min.js"></script>
	<script src="scripts/ocLazyLoad/require.js"></script>
	<script src="scripts/ocLazyLoad/ocLazyLoad.min.js"></script>
	<script src="scripts/ocLazyLoad/ocLazyLoad.require.min.js"></script>
<!--End Global JS for Skin -->



 <script src="scripts/ngMask.min.js"></script>
 
  
<script src="scripts/md-steppers.js"></script>
	<!--Global CSS for Skin -->
	<link href="scripts/angular-material.min.css" rel="stylesheet" />
	<link href="scripts/angular-material-font.css" rel="stylesheet" />
	<link href="scripts/angular-fonts.css" rel="stylesheet" />
	<link href="scripts/IRANSansWeb.css" rel="stylesheet" />
<!--End Global CSS for Skin -->
 <link href="scripts/md-input.css" rel="stylesheet" />
 
  
<link href="scripts/md-steppers.css" rel="stylesheet" />
	
	<base >
<script>
    var app = angular.module("APP", ['ngMaterial','ngStorage','oc.lazyLoad','ngMask','md-steppers']);
	
	
    app.controller("CTRL", ['$rootScope','$scope', '$http','$q','$filter','$http', function ($rootScope,$scope, $http,$q, $filter,$http){
		$rootScope.AppTitle="Title";
		$rootScope.contents=[];
		
			$rootScope.getRand = function(){
		$rootScope.rand = Math.random();
	}
	$rootScope.getRand();
	
	$rootScope.pageContentId = 	""+window.location.href.split("?")[1].split("&pageContentId=")[1].split("&")[0];
//	$rootScope.activeContent = 	""+window.location.href.split("?")[1].split("&index=")[1].split("&")[0];
	$rootScope.navigateULR = function (pageId, pageContentId) {
		url = pageId+".html?r="+$rootScope.rand+"&pageContentId="+pageContentId;
		window.location.href = url;
	}

 
 
 $rootScope.sendData = function ($scope,url,param,methodType,callback) {
	if(url=='')
		$scope.$eval(callback+"()");
	else
	{	
		if(JSON.parse(localStorage.getItem("__localStorage.__token"))!=null)
			var token = JSON.parse(localStorage.getItem("__localStorage.__token")).token;
			
		if( localStorage.getItem("__localStorage.__CLIENT_ID")=="null" )
			localStorage.setItem("__localStorage.__CLIENT_ID", ""+$rootScope.rand); 
		
		$http({
			url: url,
			data:param,
			method: methodType,
			headers:{ 	
						'Content-Type': 'application/json' ,
						'CLIENT_ID':localStorage.getItem("__localStorage.__CLIENT_ID"),
						'authorization':'Bearer '+token
					}
		})
		.then(function (response) {
			$scope.$eval(callback).call([],response.data);
		});
	}	
}

		
	}]);
	
	app.config(function ($mdThemingProvider) {$mdThemingProvider.theme('default').primaryPalette('purple').accentPalette('pink')});
	
 
 app.directive('isnationalcode', function() {
	return {
		require: 'ngModel',
		link: function(scope, element, attr, mCtrl) {
			function myValidation(value) {
				if (!isNaN(value) && value.length==10) 
					mCtrl.$setValidity('isnationalcode', validateNationalNo(value));
				else 
					mCtrl.$setValidity('isnationalcode', false);
					
				return value; 
			}
			mCtrl.$parsers.push(myValidation);
		}
	};
	function validateNationalNo(value) {
		var regex = new RegExp('^(\\d)\\1+$');
		var isValidNumber=false;
		if(value.match(regex) == null)
			isValidNumber=true;
			if (!isNaN(value) && value.length==10 && isValidNumber) {
						var ld = Number(value.substring(9, 10));
						var n = 0, m;
						for (var i = 0; i < 9; i++) {
							n = n + Number(value.substring(i, i + 1)) * (10 - i);
						}
						m = n % 11;
						return (m == 0 && ld == 0) || (m == 1 && ld == 1) || (m > 1 && ld == 11 - m);
			}else
				return false;
	}	
});
 
</script>
</head>
<body ng-app="APP" ng-controller="CTRL" ng-cloak dir="RTL">
	
	
    <form id="FormData" name="FormData">
			<!-- Page.ContainerType is mandatory token-->
			
<div ng-init="contents =[{'index':0,'pageContentId':'190465','contentId':'160272', 'title':'NationalCode','icon':'person'},{'index':1,'pageContentId':'190466','contentId':'160273', 'title':'CellPhone','icon':'info'},{'index':2,'pageContentId':'190467','contentId':'160274', 'title':'VerifyCode','icon':'info'}];selectedContent();"></div>
<div ng-include="'header.html?r='+rand" ng-init="pageContent=(contents|filter:{pageContentId:pageContentId})[0]"></div>
<md-steppers md-selected="(contents|filter:pageContentId:pageContentId)[0].index" md-stretch-steppers="always" md-dynamic-height>
	<md-step ng-repeat="content in contents" label="{{content.title}}">
		<md-content>
			<div ng-include="'Content/'+content.pageContentId+'.html?r='+rand" ></div>
		</md-content>
	</md-step>
</md-steppers>		


    </form>
</body>
</html>
